(function(t){t(document).ready(function(){function y(){t(window).on("load",function(){t("select.qs-select").each(function(n,i){const d=t(i).attr("id");v(t(i),d)}),t("select.qs-select-single").each(function(){t(this).selectpicker()})})}function v(n,i){var d=n.attr("title"),a=new Array,e=d==""?"value":d;typeof i=="string"&&(i.search("city")>-1&&a.push("city"),i.search("zip")>-1&&a.push("ZIP"),i.search("neighborhood")>-1&&a.push("Neighborhood"),i.search("mlsarea")>-1&&a.push("MLS Area"),a.length==2&&(e=a.join(" or ")),a.length>2&&(e=a.join(", "),lastCommaIndex=e.lastIndexOf(","),acceptedValuesText1=e.slice(0,lastCommaIndex),acceptedValuesText2=e.slice(lastCommaIndex,e.length),acceptedValuesText2=acceptedValuesText2.replace(",",", or"),e=acceptedValuesText1+acceptedValuesText2),e=e.replace("Select a","")),n.attr("data-status-placeholder")!=null&&(e=n.attr("data-status-placeholder"));var c=n.parents("form"),r=n,m={ajax:{url:aios_qs_ajax,type:"POST",dataType:"json",data:{fieldname:i,q:"{{{q}}}"}},locale:{errorText:"Error retrieving results.",statusInitialized:"Start typing a "+e+".",statusNoResults:"The "+e+" not found.",searchPlaceholder:"",statusSearching:"Looking for "+e+"..."},preserveSelectedPosition:"before",preprocessData:function(s){var l,p=s.length,o=[];if(p)for(var l=0;l<=s.length-1;l++)o.push(t.extend(!0,s[l],{text:s[l].text,value:s[l].value,data:{type:s[l].type,subtext:s[l].remarks}}));return o}};c.length&&r.length&&(r.selectpicker({liveSearch:!0}).ajaxSelectPicker(m),r.on("changed.bs.select",function(s,l,p,o){$d=t(this),t(".city-zip-fields").remove(),setTimeout(function(){$d.find('option[selected="selected"]').each(function(){if($dd=t(this),$field_type=$dd.data("type"),$field_value=$dd.val(),$field_type=="listingIdList")mlsIdField=c.find("input[name=listingIdList]"),mlsIdField.length>0?mlsIdField.val(mlsIdField.val()+","+$field_value):c.prepend('<input type="hidden" class="city-zip-fields" name="'+$field_type+'" value="'+$field_value+'">');else if($field_type=="street"){var u=$field_value.split(" "),f=u.slice(1,u.length),h="";jQuery.each(f,function(x,g){h+=f[x]+" "}),c.prepend('<input type="hidden" class="city-zip-fields" name="'+$field_type+'" value="'+h+'">'),c.prepend('<input type="hidden" class="city-zip-fields" name="streetNumber" value=" '+u[0]+' ">')}else c.prepend('<input type="hidden" class="city-zip-fields" name="'+$field_type+'" value="'+$field_value+'">')})},1e3)}))}y()})})(jQuery);
