document.addEventListener("DOMContentLoaded",M=>{document.querySelectorAll(".aios-rs-listings").forEach(i=>{const m=parseInt(i.getAttribute("data-limit")),d=i.getAttribute("data-append");let s=[];const p=new MutationObserver(l=>{const c=i.querySelectorAll(".listing-item").length;let o=0;l.forEach(a=>{a.addedNodes.forEach(e=>{if(e instanceof HTMLElement&&e.classList.contains("listing-item")&&e.querySelector("img")&&s.length<m){const g=i.querySelector(".pagination-next"),r=e.querySelector(".listing-features").textContent,f=e.querySelector(".listing-address").textContent,t=f.split(",")??"",y=f.trim()??"",u=t[0].trim()??"",q=t[1].trim()??"",C=t[2].trim()??"";let A="",S="",E="";r.split("|").forEach((L,v)=>{if(L!==""){const n=L.trim();n.includes("Bed")?A=n:n.includes("Bath")?S=n:(n.includes("Sqft")||n.includes("Sqm"))&&(E=n)}}),s.push({fullAddress:y,street:u,city:q,zipCode:C,beds:A,baths:S,area:E,price:e.querySelector(".listing-price").textContent,permalink:e.querySelector("a").getAttribute("href"),image:e.querySelector("img").getAttribute("src")}),o++,s.length===m?b(d,s):(c!==6&&c===o&&b(d,s),g!==null&&g.click())}})})}),b=(l,c)=>{const o=document.getElementById(l),a=o.querySelectorAll("[data-rs-item]");if(a.length){const g=a[0].cloneNode(!0);a.forEach(r=>r.remove()),c.forEach((r,f)=>{const t=g.cloneNode(!0);["fullAddress","street","city","zipCode","beds","baths","area","price","permalink","image"].forEach((u,q)=>{t.innerHTML=t.innerHTML.replaceAll(`{{${u}}}`,r[u]!==void 0?r[u]:"")}),t.innerHTML=t.innerHTML.replaceAll("skeleton-loader",""),o.insertAdjacentHTML("beforeend",t.outerHTML)})}p.disconnect();const e=new CustomEvent("realscoutListings",{bubbles:!0,detail:{id:l,items:c}});document.getElementById(l).dispatchEvent(e)},h=i.querySelector("realscout-office-listings");p.observe(h||i.querySelector("realscout-your-listings"),{subtree:!0,childList:!0})})});
